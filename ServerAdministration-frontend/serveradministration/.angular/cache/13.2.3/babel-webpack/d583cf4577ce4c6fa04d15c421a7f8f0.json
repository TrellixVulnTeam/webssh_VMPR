{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport let WebsocketService = /*#__PURE__*/(() => {\n  class WebsocketService {\n    constructor() {}\n\n    generateEndpoint() {\n      if (window.location.protocol == 'https:') {\n        this.protocol = 'wss://';\n      } else {\n        this.protocol = 'ws://';\n      }\n\n      let endpoint = this.protocol + 'localhost:8080/api/webssh';\n      return endpoint;\n    }\n\n    connect(options) {\n      let endpoint = this.generateEndpoint() + '/' + sessionStorage.username;\n\n      if (window.WebSocket) {\n        this.connection = new WebSocket(endpoint);\n      } else {\n        options.onerror('WebSocket Not Supported');\n        return;\n      }\n\n      this.connection.onopen = function () {\n        options.onopen();\n      };\n\n      this.connection.onmessage = function (data) {\n        data = data.data.toString();\n        options.onmessage(data);\n      };\n\n      this.connection.onclose = function () {\n        if (this.readyState === 3) {\n          options.onclose();\n        } else {\n          console.log('Something went wrong.');\n        }\n      };\n\n      this.connection.onerror = function (e) {\n        options.onerror(e);\n      };\n    }\n\n    close() {\n      this.connection.close();\n    }\n\n    send(data) {\n      this.connection.send(JSON.stringify(data));\n    }\n\n    sendInitData(server) {\n      this.connection.send(JSON.stringify(server));\n    }\n\n    sendClientData(data) {\n      this.connection.send(JSON.stringify({\n        command: data\n      }));\n    }\n\n  }\n\n  WebsocketService.ɵfac = function WebsocketService_Factory(t) {\n    return new (t || WebsocketService)();\n  };\n\n  WebsocketService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: WebsocketService,\n    factory: WebsocketService.ɵfac,\n    providedIn: 'root'\n  });\n  return WebsocketService;\n})();","map":null,"metadata":{},"sourceType":"module"}